<krpano version="1.19" title="">


	<!-- testStart-->

	<!-- 地标 -->
	<hotspot name="skin_xiamianlogo" url="img/landmark.png" ath="0" atv="90" keep="true" visible="true" scale="2" onclick="openurl('http://www.quanjingke.com',_blank);" zoom="true" distorted="true"/>

	<!-- 添加logo -->
	<layer name="skin_logo" url="img/logo.png" x="20" y="5" align="lefttop" keep="true" visible="true" scale="0.05" onclick="openurl('https://you.autohome.com.cn/',_blank);"/>
	
	<!-- 音频播放 -->
	<!-- 直接在热点的点击事件里调用js的函数，把视频文件或音频文件传进去 -->
	<!-- <hotspot name="audio1" url="img/open.png" ath="0" atv="0" crop="0|50|50|50" keep="true" visible="true" scale="0.8" onclick="js(PlayAudio('mp3/bg_music.mp3'););" /> -->

	<layer name="audio123" url="img/open.png" x="20" y="80" keep="true" visible="true" scale="0.04" onclick="js(PlayAudio('mp3/bg_music.mp3'););"/>

	<!-- <layer name="skin_xiamianlogo" url="https://s.autoimg.cn/www/site/widget/images/robotImg.png" x="20" y="50" keep="true" visible="true" scale="2" onclick="show_introduce" zoom="true" distorted="true"/> -->

	
	
	

	


	


	<!-- testEnd -->
	<include url="skin/vtourskin.xml" />


	<!-- customize skin settings: maps, gyro, webvr, thumbnails, tooltips, layout, design, ... -->
	<skin_settings maps="false"
	               maps_type="google"
	               maps_bing_api_key=""
	               maps_google_api_key=""
	               maps_zoombuttons="false"
	               gyro="true"
	               webvr="true"
	               webvr_gyro_keeplookingdirection="false"
	               webvr_prev_next_hotspots="true"
	               littleplanetintro="false"
	               title="true"
	               thumbs="true"
	               thumbs_width="120" thumbs_height="80" thumbs_padding="10" thumbs_crop="0|40|240|160"
	               thumbs_opened="false"
	               thumbs_text="false"
	               thumbs_dragging="true"
	               thumbs_onhoverscrolling="false"
	               thumbs_scrollbuttons="false"
	               thumbs_scrollindicator="false"
	               thumbs_loop="false"
	               tooltips_buttons="false"
	               tooltips_thumbs="false"
	               tooltips_hotspots="false"
	               tooltips_mapspots="false"
	               deeplinking="false"
	               loadscene_flags="MERGE"
	               loadscene_blend="OPENBLEND(0.5, 0.0, 0.75, 0.05, linear)"
	               loadscene_blend_prev="SLIDEBLEND(0.5, 180, 0.75, linear)"
	               loadscene_blend_next="SLIDEBLEND(0.5,   0, 0.75, linear)"
	               loadingtext="loading..."
	               layout_width="100%"
	               layout_maxwidth="814"
	               controlbar_width="-24"
	               controlbar_height="40"
	               controlbar_offset="20"
	               controlbar_offset_closed="-40"
	               controlbar_overlap.no-fractionalscaling="10"
	               controlbar_overlap.fractionalscaling="0"
	               design_skin_images="vtourskin2.png"
	               design_bgcolor="0x2D3E50"
	               design_bgalpha="0.8"
	               design_bgborder="0"
	               design_bgroundedge="1"
	               design_bgshadow="0 4 10 0x000000 0.3"
	               design_thumbborder_bgborder="3 0xFFFFFF 1.0"
	               design_thumbborder_padding="2"
	               design_thumbborder_bgroundedge="0"
	               design_text_css="color:#FFFFFF; font-family:Arial;"
	               design_text_shadow="1"
	               />

	<!--
	    For an alternative skin design either change the <skin_settings> values 
	    from above or optionally include one of the predefined designs from below.
	-->
	<!-- <include url="skin/vtourskin_design_flat_light.xml"  /> -->
	<!-- <include url="skin/vtourskin_design_glass.xml"       /> -->
	<!-- <include url="skin/vtourskin_design_ultra_light.xml" /> -->
	<!-- <include url="skin/vtourskin_design_117.xml"         /> -->
	<!-- <include url="skin/vtourskin_design_117round.xml"    /> -->
	<!-- <include url="skin/vtourskin_design_black.xml"       /> -->
	<!-- <include url="skin/buttonsbar-include.xml"       />	 -->


	<!-- startup action - load the first scene -->
	<action name="startup" autorun="onstart">
		if(startscene === null OR !scene[get(startscene)], copy(startscene,scene[0].name); );
		loadscene(get(startscene), null, MERGE);
		if(startactions !== null, startactions() );
	</action>


	
	<scene name="scene_002" title="紫禁城-1" onstart="" thumburl="panos/002.tiles/thumb.jpg" lat="" lng="" heading="">

		<!-- <view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" /> -->

		<view stereographic="true"
		  fisheye="1.0"
		  fov="155"
		  fovtype="VFOV"
		  fovmax="150"
		  hlookat="-60"
		  vlookat="77"
		  />


		<preview url="panos/002.tiles/preview.jpg" />

		<image type="CUBE" multires="true" tilesize="512">
			<level tiledimagewidth="256" tiledimageheight="256">
				<cube url="panos/002.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
			</level>
		</image>




	</scene>

	<scene name="scene_003" title="紫禁城-2" onstart="" thumburl="panos/003.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="panos/003.tiles/preview.jpg" />

		<image type="CUBE" multires="true" tilesize="512">
			<level tiledimagewidth="256" tiledimageheight="256">
				<cube url="panos/003.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
			</level>
		</image>

	</scene>

	<scene name="scene_004" title="紫禁城-3" onstart="" thumburl="panos/004.tiles/thumb.jpg" lat="" lng="" heading="">

		<view hlookat="0.0" vlookat="0.0" fovtype="MFOV" fov="120" maxpixelzoom="2.0" fovmin="70" fovmax="140" limitview="auto" />

		<preview url="panos/004.tiles/preview.jpg" />

		<image type="CUBE" multires="true" tilesize="512">
			<level tiledimagewidth="256" tiledimageheight="256">
				<cube url="panos/004.tiles/%s/l1/%v/l1_%s_%v_%h.jpg" />
			</level>
		</image>

	</scene>



	<!-- test -->
	<scene>
		<!-- 文本框的显示 -->
		<!-- 有图片 textbox作为背景图层放置一张透明图片transpa.png，上面有textpicture/hotspot_pos_info/closetext三个图层，前者为图片图层，中间为文字图层,后者为关闭按钮的图层 -->
		<layer name="textbox" keep="true" url="picture/transpa.png" align="lefttop" height="50%" width="40%" zorder="2" visible="false" >
			<layer name="textpicture" keep="true" align="lefttop" height="80%" width="100%" zorder="2" />
			<layer name="hotspot_pos_info"
		        url="%SWFPATH%/plugins/textfield.swf"
		        html=""
		        css="font-family:Courier;"
		        padding="20"
		        align="bottom"
		        height="20%" width="100%"
		        /> 
		    <layer name="closetext" keep="true" url="picture/close.png" align="righttop" zorder="3" onclick="set(layer[textbox].visible, false); " />
		</layer>
		 
		<action name="print_hotspot_pos">
			<![CDATA[
			copy(print_ath, ath);
			copy(print_atv, atv);
			roundval(print_ath, 3);
			roundval(print_atv, 3); 
			calc(layer[hotspot_pos_info].html, '名称：' + name + '[br]水平视角：' + print_ath + '[br]垂直视角: ' + print_atv);
		]]></action>
		 
		<action name="print_hotspot_pic">
			if(name==="spot1", set(layer[textpicture].url, picture/picture.png));
			if(name==="spot3", set(layer[textpicture].url, picture/Capture.png));
			print_hotspot_pos(); 
			set(layer[textbox].visible, true);
		</action>	
		 
		<!-- 没图片  zorder 插入元素的次序索引，可以是字符也可以是数字，html5输出必须是0-100整数 -->
		<layer name="textmessage" url="%SWFPATH%/plugins/textfield.swf" html="" css="font-family:Courier;" padding="20" zorder="2" visible="false" >	        
		    <layer name="closemessage" keep="true" url="picture/close.png" align="righttop" zorder="3" onclick="set(layer[textmessage].visible, false); " />
		</layer>
		 
		<action name="print_hotspot_message">
			<![CDATA[
			copy(print_ath, ath);
			copy(print_atv, atv);
			roundval(print_ath, 3);
			roundval(print_atv, 3); 
			calc(layer[textmessage].html, '名称：' + name + '[br]水平视角：' + print_ath + '[br]垂直视角: ' + print_atv);
			set(layer[textmessage].visible, true);
		]]></action>
		 
		<!-- ath hlookat  水平视角  -180 至  180 之间 -->
		<!-- atv vlookat  垂直视角  -90  至  90  之间 -->
		<!-- distored 设置热点是否跟随场景进行3D扭曲  zoom 设置是否场景缩放时，热点跟随缩放 -->
		<hotspot name="spot1" url="picture/markdot.png" scale="0.05" ath="168.023" atv="9.288" zoom="true" distorted="true" onclick="print_hotspot_pic();" />
		<hotspot name="spot2" url="picture/markdot.png" scale="0.05" ath="-91.156" atv="12.433" zoom="true" distorted="true" onclick="print_hotspot_message();" />
		<hotspot name="spot3" url="picture/markdot.png" scale="0.1" ath="96.052" atv="-70.225" zoom="true" distorted="true" onclick="print_hotspot_pic()" />	

	</scene>





	<!-- 小行星效果 -->
	<display flash10="off" details="24" />
 
 
 
	<!-- when the loading is done, wait 2 seconds and then start with the animation to an normal view -->
	<events onloadcomplete="delayedcall(2.0, normalview());" />
 
 
	<action name="normalview">
		tween(view.hlookat, -40, 2.5, easeInOutQuad);
		tween(view.vlookat, -35, 2.5, easeInOutQuad);
		tween(view.fov,     85,  2.5, easeInOutQuad);
		tween(view.fisheye, 0.0, 2.5, easeInOutQuad);
		wait(2.7);
		set(display.flash10, on);
		
	</action>


</krpano>
